class DatePaginator{static #a={selectedDateChangedEvent:"dateChanged.datePagination"};static #b=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];static #c={date:"YYYY-MM-DD",day:"ddd"};static #d={pageItem:{text:"ddd<br/>D",tooltip:"dddd, D MMMM YYYY"},slideRange:{window:"weekly"},size:void 0,highlightToday:!0,toolbar:{showToolbar:!0,showCalendar:!0,showToday:!0},startDate:{date:dayjs(new Date(-864e13)),format:DatePaginator.#c.date},endDate:{date:dayjs(new Date(864e13)),format:DatePaginator.#c.date},selectedDate:{date:dayjs().startOf("d"),format:DatePaginator.#c.date,text:"dddd<br/>D MMMM YYYY",highlight:!0},offDays:[{dates:["Sat","Sun"],format:DatePaginator.#c.day,disable:!1}],periodSeparators:[{dates:["Mon"],format:DatePaginator.#c.day}],classes:{wrapperElement:void 0,pagination:void 0,pageItem:void 0,pageLink:void 0,pageLinkNav:void 0,icon:void 0,toolbar:"bg-secondary-subtle",toolbarButtonGroup:void 0,toolbarButton:"btn-link"},templates:{pagination:'<ul class="pagination date-pagination"></ul>',pageItem:'<li class="page-item"></li>',pageLink:'<a href="#" class="page-link text-center align-content-center"></a>',pageLinkNav:'<button type="button" class="page-link text-center align-content-center"></button>',icon:'<i class="bi"></i>',toolbar:'<div class="btn-toolbar rounded rounded-top-0 justify-content-center" role="toolbar"></div>',toolbarButtonGroup:'<div class="btn-group" role="group"></div>',toolbarButton:'<button type="button" class="btn"></button>',disabledPageItem:'<span class="d-inline-block" tabindex="0"></span>',datePicker:'<input class="visually-hidden" id="datePicker"></input>'},text:{invalidDateFormat:"The provided date is not in the correct format.",outOfRange:"Out of Range",disabled:"Disabled",startOfRange:"Start of range",endOfRange:"End of range",todayButtonTooltip:"Go to Today",calendarButtonTooltip:"Select a date"},icons:{leftNav:"bi-chevron-left",rightNav:"bi-chevron-right",today:"bi-calendar-date",datePicker:"bi-calendar"}};#e;#f;#g;#h=!1;#i={wrapper:null,leftNav:null,rightNav:null,icon:null,listItem:null,calendar:null,toolbar:null,datePicker:null,datePickerInput:null};constructor(t,e,a){this.#e=document.querySelector(t),this.#f={...DatePaginator.#d,...e},this.#j();var i=[],s=[];if(this.#f.offDays)for(let o of this.#f.offDays)for(let n of o.dates){var r=DatePaginator.#b.indexOf(n);-1!==r&&(i.push(r),o.disable&&s.push(r))}var d={autohide:!0,buttonClass:"btn",todayButton:this.#f.toolbar.showToday,todayHighlight:this.#f.highlightToday,daysOfWeekHighlighted:i,daysOfWeekDisabled:s,minDate:this.#f.startDate.date.toDate(),maxDate:this.#f.endDate.date.toDate()};this.#g={...d,...a},this.#k(),this.#l()}getSelectedDate(){return this.#f.selectedDate.date.clone()}setSelectedDate(t,e){var a=dayjs(t.date,t.format?t.format:this.#f.selectedDate.format);this.#m(a),this.#k(),e&&"function"==typeof e&&e(this.#f.selectedDate.date)}#l(){[...this.#e.querySelectorAll("[data-pagination-action]")].map(t=>{t.addEventListener("click",t=>{this.#n(t)})})}#o(){this.#e.removeEventListener(DatePaginator.#a.selectedDateChangedEvent)}#p(){this.#i.datePicker&&this.#i.datePicker.destroy()}destroy(){this.#h&&(this.#p(),this.#i.wrapper.remove(),this.#i.wrapper=null,this._unsubscribeEvents()),this.initialized=!1}#m(t){t.isSame(this.#f.selectedDate.date,"d")||t.isBefore(this.#f.startDate.date,"d")||t.isAfter(this.#f.endDate.date,"d")||(this.#f.selectedDate.date=t.startOf("day"),this.#i.datePicker.setDate(this.#f.selectedDate.date.toDate()),this.#e.dispatchEvent(new CustomEvent(DatePaginator.#a.selectedDateChangedEvent,{detail:{selectedDate:t.clone()}})))}#n(e){e.preventDefault();var a=e.target.dataset;switch("I"===e.target.tagName&&(a=e.target.parentElement.dataset),a.paginationAction){case"goto":this.#i.datePicker.show();break;case"today":this.#m(dayjs()),this.#k();break;case"item":this.#m(dayjs(e.target.dataset.moment)),this.#k();break;case"left":var i=this.#q(this.#f.selectedDate.date,this.#r);i&&(this.#m(i),this.#k());break;case"right":var i=this.#q(this.#f.selectedDate.date,this.#s);i&&(this.#m(i),this.#k())}}#j(){"small"===this.#f.size?this.#f.size="sm":"large"===this.#f.size&&(this.#f.size="lg"),this.#t("startDate"),this.#t("endDate"),this.#t("selectedDate"),this.#f.selectedDate.date.isBefore(this.#f.startDate.date)&&(this.#f.selectedDate.date=this.#f.startDate.date.clone()),this.#f.selectedDate.date.isAfter(this.#f.endDate.date)&&(this.#f.selectedDate.date=this.#f.endDate.date.clone())}#t(s){if("string"==typeof this.#f[s].date){var o=this.#f[s].format??DatePaginator.#c.date;this.#f[s].date=dayjs(this.#f[s].date,o).startOf("day")}else if(!this.#f[s].date instanceof dayjs)throw this.#f[s].date=null,Error(this.#f.text.invalidDateFormat)}#r(n){return n.subtract(1,"day")}#s(r){return r.add(1,"day")}#q(d,l){var h,p,c=d,m=!0;do if(c=l(c),p=this.#u(c),m=this.#v(c),(!p||!p.disable)&&m){h=c;break}while(m);return h}#v(D){return(D.isSame(this.#f.startDate.date)||D.isAfter(this.#f.startDate.date))&&(D.isSame(this.#f.endDate.date)||D.isBefore(this.#f.endDate.date))}#w(f){return f.isSame(this.#f.selectedDate.date)}#x(u){return u.isSame(dayjs().startOf("day"))}#y(g){var b=!1;for(let v of this.#f.periodSeparators)if(-1!==v.dates.indexOf(g.format(v.format))){b=v;break}return b}#u(O){var y=!1;for(let M of this.#f.offDays)if(-1!==M.dates.indexOf(O.format(M.format))){y=M;break}return y}#z(w,$){return $?w.format(this.#f.selectedDate.text):w.format(this.#f.pageItem.text)}#A(k,T,L){var P=k.format(this.#f.pageItem.tooltip);return T?L&&L.disable&&(P=L.disable.tooltip?L.disable.tooltip:P):P=this.#f.text.outOfRange,P}#B(E,N,S){let A=[],x=E;for(;!x.isAfter(N);){var F=this.#w(x),C=this.#v(x),R=this.#u(x);A.push({m:x.format(S.format),inRange:C,isSelected:F,isToday:this.#x(x),isOffDay:R,isSeparator:this.#y(x),text:this.#z(x,F),tooltip:this.#A(x,C,R)}),x=x.add(1,"days")}return A}#C(){var I={};if("string"==typeof this.#f.slideRange.window){if("weekly"===this.#f.slideRange.window){var B=this.#f.selectedDate.date.get("d"),z=B-this.#f.selectedDate.date.startOf("w").get("d"),Y=this.#f.selectedDate.date.endOf("w").get("d")-B;I.start=this.#f.selectedDate.date.subtract(z,"d"),I.end=this.#f.selectedDate.date.add(Y,"d")}}else if("number"==typeof this.#f.slideRange.window){var _=this.#f.slideRange.window??7;I.start=this.#f.selectedDate.date.subtract(_,"d"),I.end=this.#f.selectedDate.date.add(_,"d")}return{startOfRange:!this.#q(this.#f.selectedDate.date,this.#r),endOfRange:!this.#q(this.#f.selectedDate.date,this.#s),items:this.#B(I.start,I.end,{format:this.#f.selectedDate.format})}}#D(G,j=!0){var H=this.#f.templates[G];if(!(H=j?H.trim():H))return null;let W=document.createElement("template");W.innerHTML=H;let q=W.content.children;var K=1===q.length?q[0]:q,J=this.#f.classes[G];return J&&K.classList.add(J),K}#E(Q,U=null){var V=this.#D("pageItem");if(V.append(Q),U)for(var X in U)U.hasOwnProperty(X)&&V.setAttribute(X,U[X]);return V}#F(Z,tt){Z.setAttribute("data-pagination-action",tt),Z.setAttribute("data-pagination-item-type","nav")}#G(te,ta){this.#f.size&&("sm"===this.#f.size?ta.classList.add(`${te}-sm`):"lg"===this.#f.size&&ta.classList.add(`${te}-lg`))}#k(){var ti=this.#C();if(this.#h)this.#p();else{if(this.#f.classes.wrapperElement&&this.#e.classList.add(this.#f.classes.wrapperElement),this.#i.wrapper=this.#D("pagination"),this.#G("pagination",this.#i.wrapper),this.#i.wrapper.setAttribute("data-pagination-start-date",this.#f.startDate.date),this.#i.wrapper.setAttribute("data-pagination-end-date",this.#f.endDate.date),this.#f.toolbar.showToolbar){this.#e.classList.add("d-inline-block");var ts=this.#D("toolbar");if(this.#i.wrapper.classList.add("mb-0"),this.#f.toolbar.showToday){var to=this.#D("icon");to.classList.add(this.#f.icons.today);var tn=this.#D("toolbarButton");tn.setAttribute("data-pagination-action","today"),tn.setAttribute("title",this.#f.text.todayButtonTooltip),tn.append(to);var tr=this.#D("toolbarButtonGroup");this.#G("btn-group",tr),tr.append(tn),this.#f.toolbar.showCalendar&&tr.classList.add("me-2"),ts.append(tr)}if(this.#f.toolbar.showCalendar){var to=this.#D("icon");to.classList.add(this.#f.icons.datePicker);var tn=this.#D("toolbarButton");tn.setAttribute("data-pagination-action","goto"),tn.setAttribute("title",this.#f.text.calendarButtonTooltip),tn.setAttribute("id","datePickerContainer"),tn.append(to);var tr=this.#D("toolbarButtonGroup");this.#G("btn-group",tr),tr.append(tn),ts.append(tr),this.#i.datePickerInput=this.#D("datePicker"),ts.append(this.#i.datePickerInput)}this.#i.toolbar=ts}this.#i.leftNav=this.#D("pageLink"),this.#F(this.#i.leftNav,"left"),this.#i.rightNav=this.#D("pageLink"),this.#F(this.#i.rightNav,"right"),this.#f.toolbar.showToolbar&&(this.#i.leftNav.classList.add("rounded-bottom-0"),this.#i.rightNav.classList.add("rounded-bottom-0"));var td=this.#D("icon");td.classList.add(this.#f.icons.leftNav),this.#i.leftNav.append(td);var tl=this.#D("icon");tl.classList.add(this.#f.icons.rightNav),this.#i.rightNav.append(tl),this.#h=!0}for(;this.#e.lastChild;)this.#e.removeChild(this.#e.lastChild);for(;this.#i.wrapper.lastChild;)this.#i.wrapper.removeChild(this.#i.wrapper.lastChild);this.#e.append(this.#i.wrapper),this.#f.toolbar.showToolbar&&this.#i.toolbar&&(this.#f.toolbar.showCalendar&&(this.#i.datePicker=new Datepicker(this.#i.datePickerInput,this.#g),this.#i.datePickerInput.addEventListener("changeDate",t=>{this.#m(dayjs(t.detail.date)),this.#k()})),this.#e.append(this.#i.toolbar));var ti=this.#C();this.#i.leftNav.classList.remove("disabled"),this.#i.leftNav.setAttribute("title",""),this.#i.rightNav.removeAttribute("disabled"),ti.startOfRange&&(this.#i.leftNav.classList.add("disabled"),this.#i.leftNav.setAttribute("disabled","disabled"),this.#i.leftNav.setAttribute("title",this.#f.text.startOfRange)),this.#i.wrapper.append(this.#E(this.#i.leftNav,{"data-pagination-item-type":"nav"})),[...ti.items].map(t=>{var e=this.#D("pageLink");e.setAttribute("data-moment",t.m),e.setAttribute("data-pagination-action","item"),e.setAttribute("title",t.tooltip),t.isSelected&&this.#f.selectedDate.highlight&&e.classList.add("active"),t.isToday&&this.#f.highlightToday&&e.classList.add("today","text-nowrap"),t.isSeparator&&e.classList.add("separator"),t.inRange||e.classList.add("disabled"),e.innerHTML=t.text;var a=this.#E(e);if(t.isOffDay){if(e.classList.add("offday"),t.isOffDay.disable){var i=this.#D("disabledPageItem");i.setAttribute("title",t.tooltip),e.classList.add("disabled"),i.append(e),a=this.#E(i)}}else a.addEventListener("click",t=>{this.#n(t)});this.#i.wrapper.append(a)}),this.#i.rightNav.classList.remove("disabled"),this.#i.rightNav.setAttribute("title",""),this.#i.rightNav.removeAttribute("disabled"),ti.endOfRange&&(this.#i.rightNav.classList.add("disabled"),this.#i.rightNav.setAttribute("disabled","disabled"),this.#i.rightNav.setAttribute("title",this.#f.text.endOfRange)),this.#i.wrapper.append(this.#E(this.#i.rightNav,{"data-pagination-item-type":"nav"}))}}