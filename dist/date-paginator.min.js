class DatePaginator{static #a={selectedDateChangedEvent:"dateChanged.datePagination"};static #b={date:"YYYY-MM-DD",day:"ddd"};static #c={pageItem:{text:"ddd<br/>D",tooltip:"dddd, D MMMM YYYY"},slideRange:{window:"weekly"},size:void 0,highlightToday:!0,toolbar:{showToolbar:!0,showCalendar:!0,showToday:!0},startDate:{date:dayjs(new Date(-864e13)),format:DatePaginator.#b.date},endDate:{date:dayjs(new Date(864e13)),format:DatePaginator.#b.date},selectedDate:{date:dayjs().startOf("d"),format:DatePaginator.#b.date,text:"dddd<br/>D MMMM YYYY",highlight:!0},offDays:[{dates:["Sat","Sun"],format:DatePaginator.#b.day,disable:!1}],periodSeparators:[{dates:["Mon"],format:DatePaginator.#b.day}],classes:{wrapperElement:void 0,pagination:void 0,pageItem:void 0,pageLink:void 0,pageLinkNav:void 0,icon:void 0,toolbar:"bg-secondary-subtle",toolbarButtonGroup:void 0,toolbarButton:"btn-link"},templates:{pagination:'<ul class="pagination date-pagination"></ul>',pageItem:'<li class="page-item"></li>',pageLink:'<a href="#" class="page-link text-center align-content-center"></a>',pageLinkNav:'<button type="button" class="page-link text-center align-content-center"></button>',icon:'<i class="bi"></i>',toolbar:'<div class="btn-toolbar rounded rounded-top-0 justify-content-center" role="toolbar"></div>',toolbarButtonGroup:'<div class="btn-group" role="group"></div>',toolbarButton:'<button type="button" class="btn"></button>',disabledPageItem:'<span class="d-inline-block" tabindex="0"></span>',datePicker:'<input class="visually-hidden" id="datePicker"></input>'},text:{invalidDateFormat:"The provided date is not in the correct format.",outOfRange:"Out of Range",disabled:"Disabled",startOfRange:"Start of range",endOfRange:"End of range"},icons:{leftNav:"bi-chevron-left",rightNav:"bi-chevron-right",today:"bi-calendar-date",datePicker:"bi-calendar"}};#d;#e;#f;#g=!1;#h={wrapper:null,leftNav:null,rightNav:null,icon:null,listItem:null,calendar:null,toolbar:null,datePicker:null};constructor(t,e){this.#d=t,this.#e=document.querySelector(t),this.#f={...DatePaginator.#c,...e},this.#i(),this.#j(),this.#k()}getSelectedDate(){return this.#f.selectedDate.date.clone()}setSelectedDate(t,e){var a=dayjs(t.date,t.format?t.format:this.#f.selectedDate.format);this.#l(a),this.#j(),e&&"function"==typeof e&&e(this.#f.selectedDate.date)}#k(){[...this.#e.querySelectorAll("[data-pagination-action]")].map(t=>{t.addEventListener("click",t=>{this.#m(t)})})}#n(){this.#e.removeEventListener(DatePaginator.#a.selectedDateChangedEvent)}#o(){this.#h.datePicker&&this.#h.datePicker.destroy()}destroy(){this.#g&&(this.#o(),this.#h.wrapper.remove(),this.#h.wrapper=null,this._unsubscribeEvents()),this.initialized=!1}#l(t){t.isSame(this.#f.selectedDate.date,"d")||t.isBefore(this.#f.startDate.date,"d")||t.isAfter(this.#f.endDate.date,"d")||(this.#f.selectedDate.date=t.startOf("day"),this.#e.dispatchEvent(new CustomEvent(DatePaginator.#a.selectedDateChangedEvent,{detail:{selectedDate:t.clone()}})))}#m(e){e.preventDefault();var a=e.target.dataset;switch("I"===e.target.tagName&&(a=e.target.parentElement.dataset),a.paginationAction){case"goto":this.#h.datePicker.show();break;case"today":this.#l(dayjs()),this.#j();break;case"item":this.#l(dayjs(e.target.dataset.moment)),this.#j();break;case"left":var i=this.#p(this.#f.selectedDate.date,this.#q);i&&(this.#l(i),this.#j());break;case"right":var i=this.#p(this.#f.selectedDate.date,this.#r);i&&(this.#l(i),this.#j())}}#i(){"small"===this.#f.size?this.#f.size="sm":"large"===this.#f.size&&(this.#f.size="lg"),this.#s("startDate"),this.#s("endDate"),this.#s("selectedDate"),this.#f.selectedDate.date.isBefore(this.#f.startDate.date)&&(this.#f.selectedDate.date=this.#f.startDate.date.clone()),this.#f.selectedDate.date.isAfter(this.#f.endDate.date)&&(this.#f.selectedDate.date=this.#f.endDate.date.clone())}#s(s){if("string"==typeof this.#f[s].date){var o=this.#f[s].format??DatePaginator.#b.date;this.#f[s].date=dayjs(this.#f[s].date,o).startOf("day")}else if(!this.#f[s].date instanceof dayjs)throw this.#f[s].date=null,Error(this.#f.text.invalidDateFormat)}#q(n){return n.subtract(1,"day")}#r(r){return r.add(1,"day")}#p(d,l){var h,p,c=d,m=!0;do if(c=l(c),p=this.#t(c),m=this.#u(c),(!p||!p.disable)&&m){h=c;break}while(m);return h}#u(D){return(D.isSame(this.#f.startDate.date)||D.isAfter(this.#f.startDate.date))&&(D.isSame(this.#f.endDate.date)||D.isBefore(this.#f.endDate.date))}#v(g){return g.isSame(this.#f.selectedDate.date)}#w(f){return f.isSame(dayjs().startOf("day"))}#x(b){var v=!1;for(let u of this.#f.periodSeparators)if(-1!==u.dates.indexOf(b.format(u.format))){v=u;break}return v}#t(O){var M=!1;for(let y of this.#f.offDays)if(-1!==y.dates.indexOf(O.format(y.format))){M=y;break}return M}#y(w,$){return $?w.format(this.#f.selectedDate.text):w.format(this.#f.pageItem.text)}#z(L,k,E){var N=L.format(this.#f.pageItem.tooltip);return k?E&&E.disable&&(N=E.disable.tooltip?E.disable.tooltip:N):N=this.#f.text.outOfRange,N}#A(T,A,P){let x=[],S=T;for(;!S.isAfter(A);){var F=this.#v(S),R=this.#u(S),C=this.#t(S);x.push({m:S.format(P.format),inRange:R,isSelected:F,isToday:this.#w(S),isOffDay:C,isSeparator:this.#x(S),text:this.#y(S,F),tooltip:this.#z(S,R,C)}),S=S.add(1,"days")}return x}#B(){var I={};if("string"==typeof this.#f.slideRange.window){if("weekly"===this.#f.slideRange.window){var z=this.#f.selectedDate.date.get("d"),B=z-this.#f.selectedDate.date.startOf("w").get("d"),Y=this.#f.selectedDate.date.endOf("w").get("d")-z;I.start=this.#f.selectedDate.date.subtract(B,"d"),I.end=this.#f.selectedDate.date.add(Y,"d")}}else if("number"==typeof this.#f.slideRange.window){var _=this.#f.slideRange.window??7;I.start=this.#f.selectedDate.date.subtract(_,"d"),I.end=this.#f.selectedDate.date.add(_,"d")}return{startOfRange:!this.#p(this.#f.selectedDate.date,this.#q),endOfRange:!this.#p(this.#f.selectedDate.date,this.#r),items:this.#A(I.start,I.end,{format:this.#f.selectedDate.format})}}#C(j,G=!0){var H=this.#f.templates[j];if(!(H=G?H.trim():H))return null;let q=document.createElement("template");q.innerHTML=H;let K=q.content.children;var J=1===K.length?K[0]:K,Q=this.#f.classes[j];return Q&&J.classList.add(Q),J}#D(U,V=null){var W=this.#C("pageItem");if(W.append(U),V)for(var X in V)V.hasOwnProperty(X)&&W.setAttribute(X,V[X]);return W}#E(Z,tt){Z.setAttribute("data-pagination-action",tt),Z.setAttribute("data-pagination-item-type","nav")}#j(){var te=this.#B();if(this.#g)this.#o();else{if(this.#f.classes.wrapperElement&&this.#e.classList.add(this.#f.classes.wrapperElement),this.#f.size&&("sm"===this.#f.size?this.#h.wrapper.classList.add("pagination-sm"):"lg"===this.#f.size&&this.#h.wrapper.classList.add("pagination-lg")),this.#h.wrapper=this.#C("pagination"),this.#h.wrapper.setAttribute("data-pagination-start-date",this.#f.startDate.date),this.#h.wrapper.setAttribute("data-pagination-end-date",this.#f.endDate.date),this.#f.toolbar.showToolbar){this.#e.classList.add("d-inline-block");var ta=this.#C("toolbar");if(this.#h.wrapper.classList.add("mb-0"),this.#f.toolbar.showToday){var ti=this.#C("icon");ti.classList.add(this.#f.icons.today);var ts=this.#C("toolbarButton");ts.setAttribute("data-pagination-action","today"),ts.append(ti);var to=this.#C("toolbarButtonGroup");to.append(ts),this.#f.toolbar.showCalendar&&to.classList.add("me-2"),ta.append(to)}if(this.#f.toolbar.showCalendar){var ti=this.#C("icon");ti.classList.add(this.#f.icons.datePicker);var ts=this.#C("toolbarButton");ts.setAttribute("data-pagination-action","goto"),ts.setAttribute("id","datePickerContainer"),ts.append(ti);var to=this.#C("toolbarButtonGroup");to.append(ts),ta.append(to)}this.#h.toolbar=ta}this.#h.leftNav=this.#C("pageLink"),this.#E(this.#h.leftNav,"left"),this.#h.rightNav=this.#C("pageLink"),this.#E(this.#h.rightNav,"right"),this.#f.toolbar.showToolbar&&(this.#h.leftNav.classList.add("rounded-bottom-0"),this.#h.rightNav.classList.add("rounded-bottom-0"));var tn=this.#C("icon");tn.classList.add(this.#f.icons.leftNav),this.#h.leftNav.append(tn);var tr=this.#C("icon");tr.classList.add(this.#f.icons.rightNav),this.#h.rightNav.append(tr),this.#g=!0}for(;this.#e.lastChild;)this.#e.removeChild(this.#e.lastChild);for(;this.#h.wrapper.lastChild;)this.#h.wrapper.removeChild(this.#h.wrapper.lastChild);if(this.#e.append(this.#h.wrapper),this.#f.toolbar.showToolbar&&this.#h.toolbar&&(this.#e.append(this.#h.toolbar),this.#f.toolbar.showCalendar)){var td=this.#C("datePicker");this.#h.toolbar.append(td),this.#h.datePicker=new Datepicker(td,{autohide:!0,buttonClass:"btn",todayHighlight:!0,minDate:this.#f.startDate.date.toDate(),maxDate:this.#f.endDate.date.toDate()}),td.addEventListener("changeDate",t=>{this.#l(dayjs(t.detail.date)),this.#j()})}var te=this.#B();this.#h.leftNav.classList.remove("disabled"),this.#h.leftNav.setAttribute("title",""),this.#h.rightNav.removeAttribute("disabled"),te.startOfRange&&(this.#h.leftNav.classList.add("disabled"),this.#h.leftNav.setAttribute("disabled","disabled"),this.#h.leftNav.setAttribute("title",this.#f.text.startOfRange)),this.#h.wrapper.append(this.#D(this.#h.leftNav,{"data-pagination-item-type":"nav"})),[...te.items].map(t=>{var e=this.#C("pageLink");e.setAttribute("data-moment",t.m),e.setAttribute("data-pagination-action","item"),e.setAttribute("title",t.tooltip),t.isSelected&&this.#f.selectedDate.highlight&&e.classList.add("active"),t.isToday&&this.#f.highlightToday&&e.classList.add("today","text-nowrap"),t.isSeparator&&e.classList.add("separator"),t.inRange||e.classList.add("disabled"),e.innerHTML=t.text;var a=this.#D(e);if(t.isOffDay){if(e.classList.add("offday"),t.isOffDay.disable){var i=this.#C("disabledPageItem");i.setAttribute("title",t.tooltip),e.classList.add("disabled"),i.append(e),a=this.#D(i)}}else a.addEventListener("click",t=>{this.#m(t)});this.#h.wrapper.append(a)}),this.#h.rightNav.classList.remove("disabled"),this.#h.rightNav.setAttribute("title",""),this.#h.rightNav.removeAttribute("disabled"),te.endOfRange&&(this.#h.rightNav.classList.add("disabled"),this.#h.rightNav.setAttribute("disabled","disabled"),this.#h.rightNav.setAttribute("title",this.#f.text.endOfRange)),this.#h.wrapper.append(this.#D(this.#h.rightNav,{"data-pagination-item-type":"nav"}))}}