class DatePagination{static #a={selectedDateChangedEvent:"dateChanged.datePagination"};static #b=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];static #c={date:"YYYY-MM-DD",day:"ddd"};static #d={pageItem:{text:"ddd<br/>D",tooltip:"dddd, D MMMM YYYY"},slideRange:{window:"weekly"},size:void 0,highlightToday:!0,toolbar:{showToolbar:!0,placement:"bottom",showCalendar:!0,showToday:!0},startDate:{date:dayjs(new Date(-864e13)),format:DatePagination.#c.date},endDate:{date:dayjs(new Date(864e13)),format:DatePagination.#c.date},selectedDate:{date:dayjs().startOf("d"),format:DatePagination.#c.date,text:"dddd<br/>D MMMM YYYY",highlight:!0},offDays:[{dates:["Sat","Sun"],format:DatePagination.#c.day,disable:!1}],periodSeparators:[{dates:["Mon"],format:DatePagination.#c.day}],classes:{wrapperElement:void 0,pagination:void 0,pageItem:void 0,pageLink:void 0,icon:void 0,toolbar:"bg-secondary-subtle",toolbarButtonGroup:void 0,toolbarButton:"btn-link",pageLinkToolbarButton:void 0},templates:{pagination:'<ul class="pagination date-pagination"></ul>',pageItem:'<li class="page-item"></li>',pageLink:'<a href="#" class="page-link text-center align-content-center"></a>',icon:'<i class="bi"></i>',toolbar:'<div class="btn-toolbar rounded justify-content-center" role="toolbar"></div>',toolbarButtonGroup:'<div class="btn-group" role="group"></div>',toolbarButton:'<button type="button" class="btn"></button>',disabledPageItem:'<span class="d-inline-block" tabindex="0"></span>',datePicker:'<input class="visually-hidden" id="datePicker"></input>'},text:{invalidDateFormat:"The provided date is not in the correct format.",outOfRange:"Out of Range",disabled:"Disabled",startOfRange:"Start of range",endOfRange:"End of range",todayButtonTooltip:"Go to Today",calendarButtonTooltip:"Select a date"},icons:{leftNav:"bi-chevron-left",rightNav:"bi-chevron-right",today:"bi-calendar-date",datePicker:"bi-calendar"}};#e;#f;#g;#h=!1;#i={wrapper:null,leftNav:null,rightNav:null,icon:null,listItem:null,calendar:null,toolbar:null,toolbarItems:[],datePicker:null,datePickerInput:null};constructor(t,e,a){this.#e=document.querySelector(t),this.#f=this.#j(DatePagination.#d,e),this.#k();var i=[],s=[];if(this.#f.offDays)for(let o of this.#f.offDays)for(let n of o.dates){var r=DatePagination.#b.indexOf(n);-1!==r&&(i.push(r),o.disable&&s.push(r))}var d={autohide:!0,buttonClass:"btn",todayButton:this.#f.toolbar.showToday,todayHighlight:this.#f.highlightToday,daysOfWeekHighlighted:i,daysOfWeekDisabled:s,minDate:this.#f.startDate.date.toDate(),maxDate:this.#f.endDate.date.toDate()};("start"===this.#f.toolbar.placement||"end"===this.#f.toolbar.placement)&&(d.container=this.#e),this.#g=this.#j(d,a),this.#l(),this.#m()}getSelectedDate(){return this.#f.selectedDate.date.clone()}setSelectedDate(t,e){var a=dayjs(t.date,t.format?t.format:this.#f.selectedDate.format);this.#n(a),this.#l(),e&&"function"==typeof e&&e(this.#f.selectedDate.date)}#o(t){return t&&"object"==typeof t&&!Array.isArray(t)}#j(e,a){let i=Object.assign({},e);return this.#o(e)&&this.#o(a)&&Object.keys(a).forEach(t=>{this.#o(a[t])&&t in e?i[t]=this.#j(e[t],a[t]):Object.assign(i,{[t]:a[t]})}),i}#m(){[...this.#e.querySelectorAll("[data-pagination-action]")].map(t=>{t.addEventListener("click",t=>{this.#p(t)})})}#q(){this.#e.removeEventListener(DatePagination.#a.selectedDateChangedEvent)}#r(){this.#i.datePicker&&this.#i.datePicker.destroy()}destroy(){this.#h&&(this.#r(),this.#i.wrapper.remove(),this.#i.wrapper=null,this._unsubscribeEvents()),this.initialized=!1}#n(s){s.isSame(this.#f.selectedDate.date,"d")||s.isBefore(this.#f.startDate.date,"d")||s.isAfter(this.#f.endDate.date,"d")||(this.#f.selectedDate.date=s.startOf("day"),this.#i.datePicker.setDate(this.#f.selectedDate.date.toDate()),this.#e.dispatchEvent(new CustomEvent(DatePagination.#a.selectedDateChangedEvent,{detail:{selectedDate:s.clone()}})))}#p(o){o.preventDefault();var n=o.target.dataset;switch("I"===o.target.tagName&&(n=o.target.parentElement.dataset),n.paginationAction){case"goto":this.#i.datePicker.show();break;case"today":this.#n(dayjs()),this.#l();break;case"item":this.#n(dayjs(o.target.dataset.moment)),this.#l();break;case"left":var r=this.#s(this.#f.selectedDate.date,this.#t);r&&(this.#n(r),this.#l());break;case"right":var r=this.#s(this.#f.selectedDate.date,this.#u);r&&(this.#n(r),this.#l())}}#k(){switch("small"===this.#f.size?this.#f.size="sm":"large"===this.#f.size&&(this.#f.size="lg"),this.#f.toolbar.placement){case"start":case"end":case"top":case"bottom":break;default:this.#f.toolbar.placement="bottom"}this.#v("startDate"),this.#v("endDate"),this.#v("selectedDate"),this.#f.selectedDate.date.isBefore(this.#f.startDate.date)&&(this.#f.selectedDate.date=this.#f.startDate.date.clone()),this.#f.selectedDate.date.isAfter(this.#f.endDate.date)&&(this.#f.selectedDate.date=this.#f.endDate.date.clone())}#v(d){if("string"==typeof this.#f[d].date){var l=this.#f[d].format??DatePagination.#c.date;this.#f[d].date=dayjs(this.#f[d].date,l).startOf("day")}else if(!this.#f[d].date instanceof dayjs)throw this.#f[d].date=null,Error(this.#f.text.invalidDateFormat)}#t(p){return p.subtract(1,"day")}#u(h){return h.add(1,"day")}#s(c,m){var b,D,u=c,f=!0;do if(u=m(u),D=this.#w(u),f=this.#x(u),(!D||!D.disable)&&f){b=u;break}while(f);return b}#x(g){return(g.isSame(this.#f.startDate.date)||g.isAfter(this.#f.startDate.date))&&(g.isSame(this.#f.endDate.date)||g.isBefore(this.#f.endDate.date))}#y(v){return v.isSame(this.#f.selectedDate.date)}#z(O){return O.isSame(dayjs().startOf("day"))}#A(M){var y=!1;for(let w of this.#f.periodSeparators)if(-1!==w.dates.indexOf(M.format(w.format))){y=w;break}return y}#w(k){var L=!1;for(let T of this.#f.offDays)if(-1!==T.dates.indexOf(k.format(T.format))){L=T;break}return L}#B($,E){return E?$.format(this.#f.selectedDate.text):$.format(this.#f.pageItem.text)}#C(P,A,N){var S=P.format(this.#f.pageItem.tooltip);return A?N&&N.disable&&(S=N.disable.tooltip?N.disable.tooltip:S):S=this.#f.text.outOfRange,S}#D(x,F,I){let C=[],B=x;for(;!B.isAfter(F);){var R=this.#y(B),z=this.#x(B),_=this.#w(B);C.push({m:B.format(I.format),inRange:z,isSelected:R,isToday:this.#z(B),isOffDay:_,isSeparator:this.#A(B),text:this.#B(B,R),tooltip:this.#C(B,z,_)}),B=B.add(1,"days")}return C}#E(){var Y={};if("string"==typeof this.#f.slideRange.window){if("weekly"===this.#f.slideRange.window){var j=this.#f.selectedDate.date.get("d"),G=j-this.#f.selectedDate.date.startOf("w").get("d"),H=this.#f.selectedDate.date.endOf("w").get("d")-j;Y.start=this.#f.selectedDate.date.subtract(G,"d"),Y.end=this.#f.selectedDate.date.add(H,"d")}}else if("number"==typeof this.#f.slideRange.window){var W=this.#f.slideRange.window??7;Y.start=this.#f.selectedDate.date.subtract(W,"d"),Y.end=this.#f.selectedDate.date.add(W,"d")}return{startOfRange:!this.#s(this.#f.selectedDate.date,this.#t),endOfRange:!this.#s(this.#f.selectedDate.date,this.#u),items:this.#D(Y.start,Y.end,{format:this.#f.selectedDate.format})}}#F(q,K=!0){var J=this.#f.templates[q];if(!(J=K?J.trim():J))return null;let Q=document.createElement("template");Q.innerHTML=J;let U=Q.content.children;var V=1===U.length?U[0]:U,X=this.#f.classes[q];return X&&V.classList.add(X),V}#G(Z,tt=null){var te=this.#F("pageItem");if(te.append(Z),tt)for(var ta in tt)tt.hasOwnProperty(ta)&&te.setAttribute(ta,tt[ta]);return te}#H(ti,ts){ti.setAttribute("data-pagination-action",ts),ti.setAttribute("data-pagination-item-type","nav")}#I(to,tn){this.#f.size&&("sm"===this.#f.size?tn.classList.add(`${to}-sm`):"lg"===this.#f.size&&tn.classList.add(`${to}-lg`))}#l(){var tr=this.#E();if(this.#h)this.#r();else{if(this.#f.classes.wrapperElement&&this.#e.classList.add(this.#f.classes.wrapperElement),this.#i.wrapper=this.#F("pagination"),this.#I("pagination",this.#i.wrapper),this.#i.wrapper.setAttribute("data-pagination-start-date",this.#f.startDate.date),this.#i.wrapper.setAttribute("data-pagination-end-date",this.#f.endDate.date),this.#f.toolbar.showToolbar){var td=!1;switch(this.#f.toolbar.placement){case"top":this.#e.classList.add("d-inline-block");break;case"bottom":this.#e.classList.add("d-inline-block"),this.#i.wrapper.classList.add("mb-0");break;case"start":case"end":td=!0,this.#e.classList.add("d-flex")}if(td){if(this.#f.toolbar.showToday){var tl=this.#F("pageLink");tl.setAttribute("data-pagination-action","today"),tl.setAttribute("title",this.#f.text.todayButtonTooltip),tl.classList.add(this.#f.classes.pageLinkToolbarButton);var tp=this.#F("icon");tp.classList.add(this.#f.icons.today),tl.append(tp),this.#i.toolbarItems.push(tl)}if(this.#f.toolbar.showCalendar){var tl=this.#F("pageLink");tl.setAttribute("data-pagination-action","goto"),tl.setAttribute("title",this.#f.text.calendarButtonTooltip),tl.classList.add(this.#f.classes.pageLinkToolbarButton);var tp=this.#F("icon");tp.classList.add(this.#f.icons.datePicker),tl.append(tp),this.#i.datePickerInput=this.#F("datePicker"),tl.append(this.#i.datePickerInput),this.#i.toolbarItems.push(tl)}}else{var th=this.#F("toolbar");if(this.#f.toolbar.showToday){var tc=this.#F("icon");tc.classList.add(this.#f.icons.today);var tm=this.#F("toolbarButton");tm.setAttribute("data-pagination-action","today"),tm.setAttribute("title",this.#f.text.todayButtonTooltip),tm.append(tc);var tb=this.#F("toolbarButtonGroup");this.#I("btn-group",tb),tb.append(tm),this.#f.toolbar.showCalendar&&tb.classList.add("me-2"),th.append(tb)}if(this.#f.toolbar.showCalendar){var tc=this.#F("icon");tc.classList.add(this.#f.icons.datePicker);var tm=this.#F("toolbarButton");tm.setAttribute("data-pagination-action","goto"),tm.setAttribute("title",this.#f.text.calendarButtonTooltip),tm.setAttribute("id","datePickerContainer"),tm.append(tc);var tb=this.#F("toolbarButtonGroup");this.#I("btn-group",tb),tb.append(tm),th.append(tb),this.#i.datePickerInput=this.#F("datePicker"),th.append(this.#i.datePickerInput)}this.#i.toolbar=th}}if(this.#i.leftNav=this.#F("pageLink"),this.#H(this.#i.leftNav,"left"),this.#i.rightNav=this.#F("pageLink"),this.#H(this.#i.rightNav,"right"),this.#f.toolbar.showToolbar)switch(this.#i.leftNav.classList.add(`rounded-${this.#f.toolbar.placement}-0`),this.#i.rightNav.classList.add(`rounded-${this.#f.toolbar.placement}-0`),this.#f.toolbar.placement){case"top":this.#i.toolbar.classList.add("rounded-bottom-0");break;case"bottom":this.#i.toolbar.classList.add("rounded-top-0");break;case"start":this.#i.leftNav.classList.add("ms-2");break;case"end":this.#i.rightNav.classList.add("me-2")}var tD=this.#F("icon");tD.classList.add(this.#f.icons.leftNav),this.#i.leftNav.append(tD);var tu=this.#F("icon");tu.classList.add(this.#f.icons.rightNav),this.#i.rightNav.append(tu),this.#h=!0}for(;this.#e.lastChild;)this.#e.removeChild(this.#e.lastChild);for(;this.#i.wrapper.lastChild;)this.#i.wrapper.removeChild(this.#i.wrapper.lastChild);switch(this.#f.toolbar.showToolbar&&this.#f.toolbar.showCalendar&&(this.#i.datePicker=new Datepicker(this.#i.datePickerInput,this.#g),this.#i.datePickerInput.addEventListener("changeDate",t=>{this.#n(dayjs(t.detail.date)),this.#l()})),this.#f.toolbar.placement){case"top":this.#e.append(this.#i.toolbar),this.#e.append(this.#i.wrapper);break;case"bottom":this.#e.append(this.#i.wrapper),this.#e.append(this.#i.toolbar);break;default:this.#e.append(this.#i.wrapper)}var tr=this.#E();"start"===this.#f.toolbar.placement&&[...this.#i.toolbarItems].map(t=>{this.#i.wrapper.append(this.#G(t,{"data-pagination-item-type":"toolbar-button"}))}),this.#i.leftNav.classList.remove("disabled"),this.#i.leftNav.setAttribute("title",""),this.#i.rightNav.removeAttribute("disabled"),tr.startOfRange&&(this.#i.leftNav.classList.add("disabled"),this.#i.leftNav.setAttribute("disabled","disabled"),this.#i.leftNav.setAttribute("title",this.#f.text.startOfRange)),this.#i.wrapper.append(this.#G(this.#i.leftNav,{"data-pagination-item-type":"nav"})),[...tr.items].map(t=>{var e=this.#F("pageLink");e.setAttribute("data-moment",t.m),e.setAttribute("data-pagination-action","item"),e.setAttribute("title",t.tooltip),t.isSelected&&this.#f.selectedDate.highlight&&e.classList.add("active"),t.isToday&&this.#f.highlightToday&&e.classList.add("today","text-nowrap"),t.isSeparator&&e.classList.add("separator"),t.inRange||e.classList.add("disabled"),e.innerHTML=t.text;var a=this.#G(e);if(t.isOffDay){if(e.classList.add("offday"),t.isOffDay.disable){var i=this.#F("disabledPageItem");i.setAttribute("title",t.tooltip),e.classList.add("disabled"),i.append(e),a=this.#G(i)}}else a.addEventListener("click",t=>{this.#p(t)});this.#i.wrapper.append(a)}),this.#i.rightNav.classList.remove("disabled"),this.#i.rightNav.setAttribute("title",""),this.#i.rightNav.removeAttribute("disabled"),tr.endOfRange&&(this.#i.rightNav.classList.add("disabled"),this.#i.rightNav.setAttribute("disabled","disabled"),this.#i.rightNav.setAttribute("title",this.#f.text.endOfRange)),this.#i.wrapper.append(this.#G(this.#i.rightNav,{"data-pagination-item-type":"nav"})),"end"===this.#f.toolbar.placement&&[...this.#i.toolbarItems].map(t=>{this.#i.wrapper.append(this.#G(t,{"data-pagination-item-type":"toolbar-button"}))})}}